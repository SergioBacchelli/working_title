# DECISIONS — журнал решений

Формат записи:
- `D-XXX` — идентификатор решения.
- Дата.
- Краткое описание.
- Детали.
- Статус (например: принято / пересмотрено / отменено).

---

## D-001 — Структура репозитория и корневая папка

- **Дата:** 2025-12-11
- **Решение:**
  - Корневая папка проекта: `D:\__dev\working-title\`.
  - Git-репозиторий и исходники живут в одной и той же папке.
  - Используются основные файлы документации:
    - `README.md`
    - `PROJECT_MAP.md`
    - `ARCHITECTURE.md`
    - `DECISIONS.md`
    - `WORKFLOW.md`
- **Статус:** принято.

---

## D-002 — Роль чата и Git

- **Дата:** 2025-12-11
- **Решение:**
  - Чат с Рэй используется как рабочая зона для обсуждений и черновиков.
  - Важные решения и принятая архитектура обязательно фиксируются в `.md` файлах и коммитятся в Git.
- **Статус:** принято.

---

## D-003 — Git-workflow и управление изменениями

- **Дата:** 2025-12-11
- **Решение:**
  - Все изменения в проекте проходят через Git и фиксируются коммитами.
  - Основная рабочая ветка: `main`.
  - Базовый цикл работы:
    1. Изменить файлы в локальном репозитории.
    2. Проверить состояние: `git status`.
    3. Добавить изменения в индекс: `git add ...`.
    4. Сделать коммит с осмысленным сообщением: `git commit -m "..."`.
    5. Отправить изменения на GitHub: `git push`.
  - Рэй (ChatGPT) **не делает коммиты и пуши сам**:
    - Рэй формирует текст изменений (код, документация, структуры),
    - Сергей вручную вносит изменения в файлы, проверяет и делает коммит.
  - Источник истины по проекту — файлы в репозитории (`main`), а не история чата.
- **Статус:** принято.

---

## D-004 — Автоматические подсказки для .md и Git

- **Дата:** 2025-12-11
- **Решение:**
  - В рамках проекта `working title` Рэй в конце ответов, связанных с изменениями в проекте, всегда:
    - формулирует необходимые изменения в файлах документации (`*.md`) в явном виде;
    - даёт инструкции по обновлению Git (какие файлы добавить, пример сообщения коммита, последовательность команд).
  - Формат подсказок:
    - блок **«Изменения в файлах»** — какие файлы править и каким текстом;
    - блок **«Инструкция по Git»** — минимальный набор команд:  
      `git status`, `git add ...`, `git commit -m "..."`, `git push`.
  - Этот режим действует, пока Сергей явно не отменит его в чате.
- **Статус:** принято.

---

## D-005 — Формат файлового хранения данных логических модулей

- **Дата:** 2025-12-11
- **Решение:**
  - Для хранения результатов работы логических модулей используется файловое хранилище на сервере.
  - Один логический модуль → один файл с данными.
  - Имя файла задаётся одним из полей интерфейса (идентификатор/имя модуля):
    - если имя совпадает с уже существующим файлом — файл полностью перезаписывается;
    - если имя новое — создаётся новый файл.
  - Для файлов с данными используется отдельная папка (например, `data/` внутри проекта).
  - Историю изменений внутри самих файлов хранить не требуется (каждая запись перезаписывает файл целиком).
  - Формат файла:
    - каждый логический модуль сериализуется в текстовый файл;
    - каждая строка файла соответствует одному полю;
    - формат строки:
      - `<FieldKeyEn>_(Display:<FieldNameRuNoSpaces>)_<Value>`
      - без пробелов во всей строке, разделитель — символ `_`;
      - пример:  
        `height_(Display:ВысотаФасада)_720`
- **Статус:** принято.

---

## D-006 — Формат UI-спеки модуля (UI-контракт одного экрана)

- **Дата:** 2025-12-14
- **Решение:**
  - Один логический модуль = **одна UI-спека** (один экран).
  - UI-спеки храним в `docs/ui/modules/`.
  - Имя файла: `docs/ui/modules/<ModuleId>.ui.md`.
  - Шаблон UI-спеки: `docs/ui/UI_TEMPLATE.md`.
  - Формат описания полей (select/radio/readonly и параметры): `docs/ui/UI_FIELD_FORMAT.md`.
  - Для полей `select/radio` в данные (Storage) сохраняется **внутреннее значение**, а не русская подпись.
- **Статус:** принято.
